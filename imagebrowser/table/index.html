<html>
<head>
  <meta charset="UTF-8">
  <style> body {padding: 0; margin: 0;} </style>

	<!-- <script src="d3.v3.min.js"></script> -->

	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script src="jquery.min.js"></script>
	<script src="jquery.csv.min.js"></script>

	<script type="text/javascript">
	
    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawTable);

	//var myFile = 'https://github.com/cudmore/p5.realtime.plots/blob/master/imagebrowser/table/a153_hs1_tp0.csv'
	var myFile = 'a153_hs1_tp0.csv'
	
	// this has to be a global function
	function drawTable() {
	   // grab the CSV
	   $.get(myFile, function(csvString) {
		  // transform the CSV string into a 2-dimensional array
		  //var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar});
		  var arrayData = $.csv.toArrays(csvString);
		  //var arrayData = $.csv.toObjects(csvString);

			console.log(arrayData)

		  // this new DataTable object holds all the data
		  var data = new google.visualization.arrayToDataTable(arrayData);

		  // this view can select a subset of the data at a time
		  var view = new google.visualization.DataView(data);
		  view.setColumns([0,5]);

		 // set chart options
		 var options = {
			title: "A Chart from a CSV!",
			hAxis: {title: data.getColumnLabel(2), minValue: data.getColumnRange(2).min, maxValue: data.getColumnRange(2).max},
			vAxis: {title: data.getColumnLabel(3), minValue: data.getColumnRange(3).min, maxValue: data.getColumnRange(3).max},
			legend: 'none'
		 };

		 // create the chart object and draw it
		 var chart = new google.visualization.ScatterChart(document.getElementById('chart'));
		 chart.draw(view, options);
	  });
	}
	</script>

</head>


<body>

	<div id="chart"></div>

</body>
</html>
